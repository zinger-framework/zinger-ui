<breadcrumb [data]="breadCrumbData" title="Add New Item"></breadcrumb>
<form (ngSubmit)="submitItemDetails(accordion)" [formGroup]="itemDetailsForm" class="item-details">
  <ngb-accordion #accordion="ngbAccordion" [destroyOnHide]="false" activeIds="ngb-panel-0">
    <ngb-panel id="basicInfoPanel">
      <ng-template class="panel-header" let-opened="opened" ngbPanelHeader>
        <accordion-header [accordion]="accordion" [opened]="opened" [panelId]="'basicInfoPanel'"
                          title='Basic Information'></accordion-header>
      </ng-template>
      <ng-template ngbPanelContent>
        <div class="row">
          <div class="col-md-6 col-lg-6">
            <label class="required">Item Name</label>
            <form-input inputType="text" name="name" placeholder="Margherita Pizza"></form-input>
          </div>
          <div class="col-md-6 col-lg-6">
            <label class="required">Description</label>
            <form-input inputType="text" name="description" placeholder="A classic delight loaded with extra cheese"></form-input>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 col-lg-6">
            <label class="required">Category</label>
            <div class="form-group form-group-category">
              <ng-select [clearable]="false" [items]="details['categories']" [searchable]="false" formControlName="category"
                         placeholder="Select">
              </ng-select>
              <div class="form-control-feedback has-danger"></div>
            </div>
          </div>
          <div class="col-md-6 col-lg-6">
            <label class="required">Sub Category</label>
            <div class="form-group form-group-sub_category">
              <ng-select [clearable]="false" [items]="details['subCategories'][this.itemDetailsForm.get('category').value]" [searchable]="false" formControlName="sub_category" placeholder="Select">
              </ng-select>
              <div class="form-control-feedback has-danger"></div>
            </div>
          </div>
        </div>
        <div>
          <div>
            <label class="required">Attribute</label>
          </div>
          
          <div formArrayName="attributes" *ngFor="let item of itemDetailsForm.get('attributes')['controls']; let i = index;">  
            <form [formGroupName]="i" class="row {{this.itemDetailsForm.get('attributes')['controls'][i]['controls'].className.value}}">
              <div class="col-md-3 col-lg-3">
                <div class="form-group form-group-attribute_name">
                  <input formControlName="attribute_name" placeholder="regular" type="text" class="form-control form-control-lg"/>
                  <div class="form-control-feedback has-danger"></div>
                </div>
              </div>
              <div class="col-md-3 col-lg-3">
                <div class="form-group form-group-attribute_value">
                  <input formControlName="attribute_value" placeholder="120" type="text" class="form-control form-control-lg"/>
                  <div class="form-control-feedback has-danger"></div>
                </div>
              </div>
              <div class="col-md-3 col-lg-3 mt-3">
                  <i type="button" class="mt-6 dw dw-delete-3" (click)="deleteFormArrayItem('attributes', i)"></i>
              </div>
              <div class="form-feedback has-danger mt-1 mb-1 text-center"></div>
            </form>
          </div>
          <br>
          <button type="button" class="btn btn-primary mt-6" (click)="addFormArrayItem('attributes')">Add Attribute</button>
        </div>
      </ng-template>
    </ngb-panel>

    <ngb-panel id="mediaInfoPanel">
      <ng-template class="panel-header" let-opened="opened" ngbPanelHeader>
        <accordion-header [accordion]="accordion" [opened]="opened" [panelId]="'mediaInfoPanel'"
                          title='Media Information'></accordion-header>
      </ng-template>
      <ng-template ngbPanelContent>
        <div class="row m-1">
          <div class="col-md-12 col-lg-12">
            <label class="required">Upload Icon</label>
            <br>
            <div class="row">
              <div *ngIf="iconSrc; else placeholderimage">
                <image-preview (deleteImageEvent)="deleteImage($event, 'icon')" [imageSrc]="iconSrc"
                               imageType="icon"></image-preview>
              </div>
              <ng-template #placeholderimage>
                <img (click)="browseFiles('icon')" class="ml-3 cursor-pointer" height="70"
                     src="/assets/images/upload-image.png"
                     width="70"/>
              </ng-template>
            </div>
            <form-input (change)="onFileChange($event, 'icon')" inputType="file"
                        name="icon"></form-input>
            <span class="small text-light-gray">• Image size: < 1 MB <br>• Image type: JPG, PNG<br>• Dimensions: 512x512 px<br>• File name: Can be alphanumeric, hyphen and underscore with a maximum of 100 characters</span>
          </div>
        </div>

        <div class="row mt-4 m-1">
          <div class="col-md-12 col-lg-12">
            <label class="required">Upload Cover Photos</label>
            <br>
            <div class="row">
              <div *ngFor="let imgSrc of coverImgSrcList;">
                <image-preview (deleteImageEvent)="deleteImage($event, 'cover_photos')" [imageId]="imgSrc['id']"
                               [imageSrc]="imgSrc['url']"
                               imageType="cover_photos"></image-preview>
              </div>
              <div *ngIf="coverImgSrcList.length<10">
                <img (click)="browseFiles('cover_photos')" class="ml-3 cursor-pointer" height="34"
                     src="/assets/images/upload-image.png"
                     width="70"/>
              </div>
            </div>
            <form-input (change)="onFileChange($event, 'cover_photos')" inputType="file"
                        name="cover_photos"></form-input>
            <span class="small text-light-gray">• Image size: < 1 MB <br>• Image type: JPG, PNG<br>• Dimensions: 1024x500 px<br>• Maximum limit: 10 images<br>• File name: Can be alphanumeric, hyphen and underscore with a maximum of 100 characters</span>
          </div>
        </div>
      </ng-template>
    </ngb-panel>

    <ngb-panel id="variantInfoPanel">
      <ng-template class="panel-header" let-opened="opened" ngbPanelHeader>
        <accordion-header [accordion]="accordion" [opened]="opened" [panelId]="'variantInfoPanel'"
                          title='Variant Information'></accordion-header>
      </ng-template>
      <ng-template ngbPanelContent>
        <div class="row">
          <div class="col-md-6 col-lg-6">
            <label class="required">Variant Property</label>
            <div class="form-group form-group-variant_property">
              <ng-select [clearable]="false" [items]="details['variantProperty'][this.itemDetailsForm.get('category').value]" 
              [searchable]="false" formControlName="variant_property" placeholder="Select">
              </ng-select>
              <div class="form-control-feedback has-danger"></div>
            </div>
          </div>
        </div>
        <div class="mt-2">
          <label>Variant Details</label>
        </div>
        <div formArrayName="variant_details" *ngFor="let item of itemDetailsForm.get('variant_details')['controls']; let i = index;">  
          <form [formGroupName]="i" class="row {{this.itemDetailsForm.get('variant_details')['controls'][i]['controls'].className.value}}">
            <div class="col-md-3 col-lg-3">
              <div class="form-group form-group-variant_name">
                <input formControlName="variant_name" placeholder="regular" type="text" class="form-control form-control-lg"/>
                <div class="form-control-feedback has-danger"></div>
              </div>
            </div>
            <div class="col-md-3 col-lg-3">
              <div class="form-group form-group-variant_price">
                <input formControlName="variant_price" placeholder="120" type="text" class="form-control form-control-lg"/>
                <div class="form-control-feedback has-danger"></div>
              </div>
            </div>
            <div class="col-md-3 col-lg-3 mt-3">
                <i type="button" class="mt-6 dw dw-delete-3" (click)="deleteFormArrayItem('variant_details', i)"></i>
            </div>
            <div class="form-feedback has-danger mt-1 mb-1 text-center"></div>
          </form>
        </div>
        <br>
        <button type="button" class="btn btn-primary mt-6" (click)="addFormArrayItem('variant_details')">Add Variant</button>
      </ng-template>
    </ngb-panel>
  </ngb-accordion>
<div class="form-feedback has-danger mt-1 mb-1 text-center"></div>
</form>