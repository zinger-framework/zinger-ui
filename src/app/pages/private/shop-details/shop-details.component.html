<div class="min-height-200px">
  <div class="page-header">
    <div class="row">
      <div class="col-md-12 col-sm-12">
        <div class="title">
          <h4>Register Shop</h4>
        </div>
        <nav aria-label="breadcrumb" role="navigation">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a routerLink="/dashboard">Home</a></li>
            <li aria-current="page" class="breadcrumb-item active">Shop</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>


  <form (ngSubmit)="submitShopDetails()" [formGroup]="shopDetailsForm" class="shopDetailsForm">
    <div class="form-feedback has-danger padding-bottom-10 text-center"></div>
    <ngb-accordion #acc="ngbAccordion" activeIds="ngb-panel-0" (panelChange)="beforeChange($event, acc)">

      <ngb-panel id="basicInfoPanel">
        <ng-template ngbPanelHeader let-opened="opened" class="panel-header">
          <div (click)="expandPanel(acc,'basicInfoPanel')" class="d-flex">
            <div class="btn p-2"><i class="icon-copy fa fa-{{ opened ? 'minus' : 'plus'  }} mb-2" aria-hidden="true"></i></div>
            <h6 class="mt-2 pt-1">Basic Information</h6>
          </div>
        </ng-template>

        <ng-template ngbPanelContent>
          <div class="row">
            <div class="col-md-6 col-lg-6">
              <label>Shop Name</label>
              <form-input inputType="text" name="shop_name" placeholder="Domino's Pizza"></form-input>
            </div>

            <div class="col-md-6 col-lg-6">
              <label>Category</label>
              <div class="form-group form-group-category">
                <ng-select formControlName="category" [clearable]="false" [searchable]="false" [items]="categories" placeholder="Select">
                </ng-select>
                <div class="form-control-feedback has-danger"></div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 col-lg-6">
              <label>Opening Time</label>
              <div class="form-group form-group-openingTime">
                <input formControlName="openingTime" placeholder="09:30 AM" aria-label="12hr format" [ngxTimepicker]="openingTime" class="form-control form-control-lg">
                <ngx-material-timepicker #openingTime></ngx-material-timepicker>
                <div class="form-control-feedback has-danger"></div>
              </div>
            </div>


            <div class="col-md-6 col-lg-6">
              <label>Closing Time</label>
              <div class="form-group form-group-closingTime">
                <input formControlName="closingTime" placeholder="09:30 PM" aria-label="12hr format" [ngxTimepicker]="closingTime" class="form-control form-control-lg">
                <ngx-material-timepicker #closingTime></ngx-material-timepicker>
                <div class="form-control-feedback has-danger"></div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 col-lg-6">
              <label>Mobile</label>
              <form-input inputType="text" name="mobile" placeholder="9884098840"></form-input>
            </div>

            <div class="col-md-6 col-lg-6">
              <label>Telephone</label>
              <form-input inputType="text" name="telephone" placeholder="25745743"></form-input>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 col-lg-6">
              <label>Shop Description</label>
              <div class="form-group form-group-description">
                <textarea rows="6" formControlName="description" placeholder="Describe your restaurant in less than 250 words" class="form-control form-control-lg"></textarea>
                <div class="form-control-feedback has-danger"></div>
              </div>
            </div>

            <div class="col-md-6 col-lg-6">
              <div>
                <label>Email</label>
                <form-input inputType="text" name="email" placeholder="john@gmail.com"></form-input>
              </div>

              <div>
                <label>Tags</label>
                <form-input inputType="text" name="tags" placeholder="Chinese, Tandoori, Biriyani, Dessert"></form-input>
              </div>
            </div>
          </div>
        </ng-template>
      </ngb-panel>

      <ngb-panel id="contactInfoPanel">
        <ng-template ngbPanelHeader let-opened="opened">
          <div (click)="expandPanel(acc,'contactInfoPanel')"  class="d-flex">
            <div class="btn p-2"><i class="icon-copy fa fa-{{ opened ? 'minus' : 'plus'  }} mb-2" aria-hidden="true"></i></div>
            <h6 class="mt-2 pt-1">Contact Information</h6>
          </div>
        </ng-template>

        <ng-template ngbPanelContent>
          <div class="row">
            <div class="col-md-6 col-lg-6">
              <label>Address Line 1</label>
              <form-input inputType="text" name="address_line_1" placeholder="No 226, Eden Gardens"></form-input>
            </div>

            <div class="col-md-6 col-lg-6">
              <label>Address Line 2</label>
              <form-input inputType="text" name="address_line_2" placeholder="Nehru Street, Anna Nagar"></form-input>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 col-lg-6">
              <label>City</label>
              <form-input inputType="text" name="city" placeholder="Chennai"></form-input>
            </div>

            <div class="col-md-6 col-lg-6">
              <label>State</label>
              <div class="form-group form-group-state">
                <ng-select formControlName="state" [clearable]="false" [searchable]="false" placeholder="Select">
                  <ng-option *ngFor="let state of states" [value]="state">{{state}}</ng-option>
                </ng-select>
                <div class="form-control-feedback has-danger"></div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 col-lg-6">
              <label>Pincode</label>
              <form-input inputType="text" name="pincode" placeholder="600078"></form-input>
            </div>
            <div class="col-md-3 col-lg-3">
              <label>Latitude</label>
              <form-input inputType="text" name="latitude" placeholder="99.87"></form-input>
            </div>
            <div class="col-md-3 col-lg-3">
              <label>Longitude</label>
              <form-input inputType="text" name="longitude" placeholder="98.57"></form-input>
            </div>
          </div>
        </ng-template>
      </ngb-panel>

      <ngb-panel id="mediaInfoPanel">
        <ng-template ngbPanelHeader let-opened="opened">
          <div (click)="expandPanel(acc,'mediaInfoPanel')" class="d-flex">
            <div class="btn p-2"><i class="icon-copy fa fa-{{ opened ? 'minus' : 'plus'  }} mb-2" aria-hidden="true"></i></div>
            <h6 class="mt-2 pt-1">Media Information</h6>
          </div>
        </ng-template>

        <ng-template ngbPanelContent>
          <div class="row m-1 min-height-200px">
            <div class="col-md-12 col-lg-12">
              <label>Upload Icon</label>
              <br>
              <div *ngIf="iconSrc; else placeholderimage">
                <image-preview imageType="icon" [imageSrc]="iconSrc" [imageName]="iconName"
                               (deleteImageEvent)="previewDeleted($event,'icon')"></image-preview>
              </div>
              <ng-template #placeholderimage>
                <div class="mt-3">
                  <img class="opacity-50" (click)="browseFiles('icon')" src="/assets/images/upload-image.png" alt="upload image"/>
                </div>
              </ng-template>
              <form-input inputType="file" name="icon" placeholder="Attach shop icon" class="file-input" (change)="onFileChange($event,'icon')"></form-input>
              <span class="small text-light-gray">• Image size: < 1 MB <br>• Image type: JPG, PNG<br>• Dimensions: 512x512 px</span>
            </div>
          </div>

          <div class="row mt-4 m-1 min-height-200px">
            <div class="col-md-12 col-lg-12">
              <label>Upload Cover Photos</label>
              <br>
              <div class="row">
                <div *ngFor="let imgSrc of coverImgSrcList; let i=index">
                  <image-preview imageType="cover_photos" [imageSrc]="imgSrc" [imageName]="coverImgNameList[i]"
                                 (deleteImageEvent)="previewDeleted($event,'cover_photos')"></image-preview>
                </div>
                <div class="mt-3 ml-3" *ngIf="coverImgSrcList.length<5">
                  <img class="opacity-50" (click)="browseFiles('cover_photos')" src="/assets/images/upload-image.png" alt="upload image"/>
                </div>
              </div>
              <form-input (change)="onFileChange($event,'cover_photos')" class="file-input" inputType="file" multiple="true"
                          name="cover_photos" placeholder="Attach shop cover photos"></form-input>
              <span class="small text-light-gray">• Image size: < 1 MB <br>• Image type: JPG, PNG<br>• Dimensions: 1024x500 px<br>• Maximum limit: 5 images</span>
            </div>
          </div>
        </ng-template>
      </ngb-panel>

      <ngb-panel id="paymentInfoPanel">
        <ng-template ngbPanelHeader let-opened="opened">
          <div (click)="expandPanel(acc,'paymentInfoPanel')" class="d-flex">
            <div class="btn p-2"><i class="icon-copy fa fa-{{ opened ? 'minus' : 'plus'  }} mb-2" aria-hidden="true"></i></div>
            <h6 class="mt-2 pt-1">Payment Information</h6>
          </div>
        </ng-template>
        <ng-template ngbPanelContent>
          <div class="row">
            <div class="col-md-6 col-lg-6">
              <label>Account Number</label>
              <form-input inputType="text" name="account_number" placeholder="99889000292"></form-input>
            </div>

            <div class="col-md-6 col-lg-6">
              <label>PAN Number</label>
              <form-input inputType="text" name="pan_number" placeholder="BYHKL3197Z"></form-input>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 col-lg-6">
              <label>IFSC Code</label>
              <form-input inputType="text" name="ifsc_code" placeholder="SBIN0021745"></form-input>
            </div>
            <div class="col-md-6 col-lg-6">
              <label>GST Number</label>
              <form-input inputType="text" name="gst_number" placeholder="09AAACS4457Q1ZO"></form-input>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 col-lg-6">
              <label>Account Holder Name</label>
              <form-input inputType="text" name="account_holder_name" placeholder="John Doe"></form-input>
            </div>
          </div>

        </ng-template>
      </ngb-panel>
    </ngb-accordion>

    <div class="m-1" *ngIf="this.current_route==this.ADD_SHOP">
      <div class="custom-control custom-checkbox mt-4">
        <input (click)="acceptTermsAndConditions()" type="checkbox" class="custom-control-input" id="customCheck1">
        <label class="custom-control-label" for="customCheck1">I have read and agreed to the <a href="#">terms and conditions</a> and <a href="#"> privacy policy</a></label>
      </div>
    </div>

    <div class="row m-0 p-0">
      <div class="col-6 row"></div>
      <div class="col-6 ml-4 pl-4 mr-0 pr-0 row">
        <div class="col-6"></div>
        <div class="col-6 mr-0 pr-0">
          <input [disabled]="!canSubmitForm()" class="btn btn-primary btn-block" type="submit" value="Register">
        </div>
      </div>
    </div>
  </form>
</div>
