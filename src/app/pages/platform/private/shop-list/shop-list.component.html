<div class="card-box overflow-hidden">
  <form (ngSubmit)="updateFilters()" [formGroup]="shopSearchForm" class="shop-search p-4"> 
    <div class="row">
      <div class="col-6">
        <rangedatepicker [fromDate]="fromDate" [toDate]="toDate" [hoveredDate]="hoveredDate" (dateSelectionEvent)="onDateSelection($event)"></rangedatepicker>
      </div> 
      <div class="col-6">
        <label>Search</label>
        <form-input inputType="text" name="query" placeholder="Shop id or name "></form-input>
      </div>
    </div>
    <div class="row">
      <div class="col-3">
          <label>Status</label>
          <div class="form-group form-group-status">
            <ng-select [clearable]="false" [items]="statuses" [searchable]="false" formControlName="status"
              [multiple]="true" placeholder="Status">
            </ng-select>
            <div class="form-control-feedback has-danger"></div>
          </div>
        </div>
      <div class="col-3">
        <label>Deleted</label> 
        <div class="form-group form-group-deleted">
          <ng-select [clearable]="false" [items]="deletedStatus" [searchable]="false" formControlName="deleted"
           [multiple]="false" placeholder="Delete Status">
          </ng-select>
          <div class="form-control-feedback has-danger"></div>
        </div> 
      </div>
      <div class="col-3">
        <label>Sort</label> 
        <div class="form-group form-group-sortorder ml-2 pl-1">
          <div class="row mt-2">
           <div class="col-4 custom-control custom-radio">
              <input id="asc" type="radio" class="custom-control-input" value="ASC" name="sortorder" formControlName="sortorder">
              <label class="custom-control-label" for="asc">ASC</label>
           </div>

           <div class="col-3 custom-control custom-radio">
              <input id="dsc" type="radio" class="custom-control-input" value="DSC" name="sortorder" formControlName="sortorder">
              <label class="custom-control-label" for="dsc">DSC</label>
           </div>
          </div>
          <div class="form-control-feedback has-danger"></div>
        </div>
      </div>
      <div class="col-1 mt-3">
        <input type="submit" name="Submit" class="btn btn-primary mt-4"/>
      </div>
    </div>
    <div class="form-feedback has-danger mt-1 ml-3"></div>
  </form>

  <div class="p-4">
    <p class="mt-2"> 
      <span class="h6">Shop</span> | 
      <span class="h6"> Total({{page.totalElements}}) </span>
    </p>
    <ngx-datatable
      #shopList
      class="material bg-white box-shadow-none border-1"
      [rows]="rows"
      [columnMode]="ColumnMode.standard"
      [loadingIndicator]="isLoading"
      [headerHeight]="50"
      [footerHeight]="50"
      rowHeight="auto"
      reorderable="false"
      [externalPaging]="true"
      [count]="page.totalElements"
      [offset]="page.pageNumber"
      [limit]="page.size"
      (page)="setPage($event)"
      (activate)="onRowClick($event)"
    >

     <ngx-datatable-column name="Id" prop="id" [width]="50" [sortable]="false">
        <ng-template let-id="value" ngx-datatable-cell-template>
           {{id}}
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Name" prop="name" [width]="250" [sortable]="false">
        <ng-template let-name="value" ngx-datatable-cell-template>
            {{name}}
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Category" prop="category" [width]="200" [sortable]="false">
        <ng-template let-category="value" ngx-datatable-cell-template>
            {{category}}
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Status" prop="status" [width]="200" [sortable]="false">
        <ng-template let-status="value" ngx-datatable-cell-template>
            {{status}}
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Area" prop="area" [width]="200" [sortable]="false">
        <ng-template let-area="value" ngx-datatable-cell-template>
            {{ area }} 
        </ng-template>
      </ngx-datatable-column>
      
      <ngx-datatable-footer>
        <ng-template 
          ngx-datatable-footer-template
          let-rowCount="rowCount"
          let-pageSize="pageSize"
          let-selectedCount="selectedCount"
          let-curPage="curPage"
          let-offset="offset"
          let-isVisible="isVisible">
            <datatable-pager
                [pagerLeftArrowIcon]="'datatable-icon-left'"
                [pagerRightArrowIcon]="'datatable-icon-right'"
                [page]="curPage"
                [size]="pageSize"
                [count]="rowCount"
                [hidden]="!((rowCount / pageSize) > 1)"
                (change)="table.onFooterPage($event)">
            </datatable-pager>
        </ng-template>
      </ngx-datatable-footer>
      
    </ngx-datatable>
  </div>
</div>
